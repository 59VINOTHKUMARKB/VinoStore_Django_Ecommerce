<!DOCTYPE html>
{% load static%}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'base/css/style.css' %}">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap"
        rel="stylesheet">
    <title>All Products - VinoStore</title>
    <style>
        /* Style for the select element */
        select {
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #fff;
            color: #333;
            appearance: none; /* Remove default styles in some browsers */
            width: 200px; /* Set a specific width */
        }

        /* Style for the options within the select */
        select option {
            padding: 10px;
            font-size: 14px;
            background-color: #f5f5f5;
            color: #333;
        }

        select:hover {
            background-color: #00c3ff75; /* Change the background color on hover */
        }

        .btnorder
        {
            display:inline-block ;
            background:#ff523b;
            color:#fff;
            padding:8px 30px;
            margin:30px 0;
            border-radius:30px;
            transition:background 0.5s;
        }
        .btnorder:hover{
            background:#563434;
        }
    </style>
</head>

<body>

    <div class="container">
        <div class="navbar">
            <div class="logo">
                <a href="{% url 'index' %}"><img
                        src="{% static 'base/css/images/Vinostore.jpeg' %}" width="125px"></a>
            </div>
            <nav>
                <ul id="MenuItems">
                    <li><a href="{% url 'app_name:index' %}">Home</a></li>
                    <li><a href=" ">Products</a></li>
                    <li><a href="{% url 'app_name:about' %}">About</a></li>
                    <li><a href="{% url 'app_name:registration' %}">Register</a></li>
                    <li><a href="{% url 'app_name:login' %}">Login</a></li>
                    <li><a href="{% url 'app_name:games' %}">Spin Games</a></li>
                </ul>
            </nav>
            <a href="{% url 'app_name:cart' %}"><img src="{% static 'base/css/images/cart.png' %}" width="25px"
                    height="25px"></a>
            <img src="{% static 'base/css/images/menu.png' %}" class="menu-icon" onclick="menutoggle()">
        </div>
    </div>
    </div>
    <div class="small-container">
        <div class="row row-2">
            <h2>All Products</h2>
            <select>
                <option>Default Sorting</option>
                <option>Short by Price</option>
                <option>Short by Popularity</option>
                <option>Short by Rating</option>
                <option>Short by Sale</option>
            </select>
        </div>

        <div class="row">
            {% for product in products %}
                {% if forloop.counter <= 6 %}
                    <div class="col-3">
                        <img src="{% static 'base/css/images/product-' %}{{ forloop.counter }}.jpg">
                        <h4>{{ product.product_name }}</h4>
                        <div class="rating">
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star-o"></i>
                        </div>
                        <h4>${{ product.price }}</h4>
                        <button class="btn" data-product-id="{{ product.product_id }}">Add to Cart</button>
                        <button class="btnorder" data-product-id="{{ product.product_id }}">Order Now</button>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
        
            <!-- <div class="col-4">
                <img src="{% static 'base/css/images/product-3.jpg' %}">
                <h4>{{product.product_name}}</h4>
                <div class="rating">
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                </div>
                <p>${{product.price}}</p>
            </div>
            <div class="col-4">
                <img src="{% static 'base/css/images/product-4.jpg' %}">
                <h4>{{product.product_name}}</h4>
                <div class="rating">
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star-o"></i>
                </div>
                <p>${{product.price}}</p>
            </div>
            <div class="col-4">
                <img src="{% static 'base/css/images/product-2.jpg' %}">
                <h4>{{product.product_name}}</h4>
                <div class="rating">
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star-o"></i>
                </div>
                <p>${{product.price}}</p>
            </div>
        </div>

        <div class="row">
            <div class="col-4">
                <img src="{% static 'base/css/images/product-5.jpg' %}">
                <h4>{{product.product_name}}</h4>
                <div class="rating">
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star-half-o"></i>
                </div>
                <p>${{product.price}}</p>
            </div>

            <div class="col-4">
                <img src="{% static 'base/css/images/product-6.jpg' %}">
                <h4>{{product.product_name}}</h4>
                <div class="rating">
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                </div>
                <p>${{product.price}}</p>
            </div>

            <div class="col-4">
                <img src="{% static 'base/css/images/product-7.jpg' %}">
                <h4>{{product.product_name}}</h4>
                <div class="rating">
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star-half-o"></i>
                    <i class="fa fa-star-o"></i>
                </div>
                <p>${{product.price}}</p>
            </div>

            <div class="col-4">
                <img src="{% static 'base/css/images/product-8.jpg' %}">
                <h4>{{product.product_name}}</h4>
                <div class="rating">
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star-half-o"></i>
                    <i class="fa fa-star-o"></i>
                </div>
                <p>${{product.price}}</p>
            </div> -->

        <div class="page-btn">
            <span>1</span>
            <span>2</span>
            <span>3</span>
            <span>4</span>
            <span>5</span>
            <span>&#8594;</span>
        </div>
    </div>

    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="footer-col-1">
                    <h3>Download our App</h3>
                    <p>Download App for Android and IOS Mobiles</p>
                    <div class="app-logo">
                        <img src="{% static 'base/css/images/play-store.png' %}">
                        <img src="{% static 'base/css/images/app-store.png' %}">
                    </div>
                </div>
                <div class="footer-col-2">
                    <img src="{% static 'base/css/images/Vinostore.jpeg' %}">
                    <p>Shop Smart, Live Stylishly: Your One-Stop E-destination for Fashion and Function.</p>
                </div>
                <div class="footer-col-3">
                    <h3>Useful Links</h3>
                    <ul>
                        <li>Coupons</li>
                        <li>Return Policy</li>
                        <li>Blog post</li>
                        <li>Join Affiliates</li>
                    </ul>
                </div>
                <div class="footer-col-4">
                    <h3>Follow us</h3>
                    <ul>
                        <li>Facebook</li>
                        <li>Twitter</li>
                        <li>Instagram</li>
                        <li>YouTube</li>
                        <li>Threads</li>
                    </ul>
                </div>
            </div>
            <hr>
            <div class="copyright">
                <p>CopyRight 2023-Vinoth Website</p>
            </div>
        </div>
    </div>

    <script>
        var MenuItems = document.getElementById("MenuItems");
        MenuItems.style.maxHeight = "0px";

        function menutoggle() {
            if (MenuItems.style.maxHeight == "0px") {
                MenuItems.style.maxHeight = "200px";
            } else {
                MenuItems.style.maxHeight = "0px";
            }
        }
    </script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        var addToCartButtons = document.querySelectorAll('.btn');
    
        // Attach click event listener to each button
        addToCartButtons.forEach(function(button) {
            button.addEventListener('click', function() {
                var productId = this.getAttribute('data-product-id');
    
                // Send AJAX request to Django view
                var xhr = new XMLHttpRequest();
                xhr.open('POST', '{% url "app_name:add_to_cart" %}', true);
                xhr.setRequestHeader('X-CSRFToken', '{{ csrf_token }}');
                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhr.onload = function() {
                    if (xhr.status >= 200 && xhr.status < 300) {
                        var response = JSON.parse(xhr.responseText);
                        if (response.success) {
                            alert('Successfully Added!')
                            alert(response.message);  // Show success message
                        } else {
                            alert('Error: ' + response.message);  // Show error message
                        }
                    } else {
                        alert('Request failed: ' + xhr.status);  // Show error if request failed
                    }
                };
                xhr.onerror = function() {
                    alert('Request failed');  // Show error if request failed
                };
                xhr.send('product_id=' + productId);
            });
        });
    });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var addToCartButtons = document.querySelectorAll('.btnorder');
        
            // Attach click event listener to each button
            addToCartButtons.forEach(function(button) {
                button.addEventListener('click', function() {
                    var productId = this.getAttribute('data-product-id');
        
                    // Send AJAX request to Django view
                    var xhr = new XMLHttpRequest();
                    xhr.open('POST', '{% url "app_name:add_to_order" %}', true);
                    xhr.setRequestHeader('X-CSRFToken', '{{ csrf_token }}');
                    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                    xhr.onload = function() {
                        if (xhr.status >= 200 && xhr.status < 300) {
                            var response = JSON.parse(xhr.responseText);
                            if (response.success) {
                                alert('Successfully Ordered!')
                                alert(response.message);  // Show success message
                            } else {
                                alert('Error: ' + response.message);  // Show error message
                            }
                        } else {
                            alert('Request failed: ' + xhr.status);  // Show error if request failed
                        }
                    };
                    xhr.onerror = function() {
                        alert('Request failed');  // Show error if request failed
                    };
                    xhr.send('product_id=' + productId);
                });
            });
        });
        </script>


    

</body>

</html>
